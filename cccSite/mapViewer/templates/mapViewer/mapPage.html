{% extends "base/base.html" %}
{% load static %}

{% block head %}
<link rel="stylesheet" type="text/css" href="{% static 'mapViewer/mappagestyle.css' %}">
<title>Chesapeake Community Connect - Map</title>

<!--the defer guarantees that 
    a) the HTML loads pre JS execution so elements referenced in the script exist
    b) the API script is executed AFTER our script file is loaded and so the callback function works
    c) the widgets are rendered such that our script file can access them
-->
<script src="{% static 'mapViewer/map-script2.js' %}" defer></script>
{{widgets|json_script}}
<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAH_5F4XRcZh8_OZib8cUD-DoE7ust60lc&libraries=places&callback=initMap" defer></script>

{% endblock head %}

{% block content %}
    <div class="containerM1">
        <div class="wrapperM1">
            <h1 class="headerM1">Chesapeake Community Connect</h1>
        </div>
    </div>

    <!-- Map Section -->
    <div class="mapholder">
        <div class="containterML">
            <div>
                <div id="map"></div>
            </div>
        </div>
        <!-- Search Post Form -->
        <div class="containerMR">
            <form id="search-form">
                <input type="text" placeholder="Type to search..." id="search-text">
                <button type="submit" class="searchBtn" id="search-button">Search Post</button>
            </form>
        </div>
    </div>



    <!-- Add Marker Form -->
    <div class="containerM4">
        <button id="add-marker-button">Create a Post</button>
        <div id="add-marker-form">
            <form id="marker-form">
                <div class="lefthalf">
                    <input type="text" id="title" name="title" required placeholder="Title:"><br>

                    <input type="text" id="address" name="address" required placeholder="Address:"><br>

                    <input type="text" id="city" name="city" required placeholder="City:"><br>

                    <input type="text" id="state" name="state" required placeholder="State:"><br>

                    <input type="text" id="zip" name="zip" required placeholder="Zip Code:"><br>

                </div>

                <!-- Description box for Create a Post section-->
                <div class="righthalf">
                    <textarea id="description" name="description" rows="14" required
                        placeholder="Description:"></textarea><br>
                </div>
                
                <!-- Post button for Create a Post section-->
                <div class="postDiv">
                    <button class="postDivB" type="submit" id="post-button">Post</button>
                </div>

            </form>
        </div>
        </div>
    </div>
    <form action="{% url 'mapViewer:default' %}" id="contact-form" method="get">
        {{searchForm.as_p}}
        <input type="submit" value="Submit">
    </form>
    {%if hasPosted %}
        Congrats it posted.
    {%elif rank > 0%}
    <div class="body">
        <form action="{% url 'mapViewer:default'%}"  method="post">
            {% csrf_token %}
            {{postForm.as_p}}
            <input type="submit" value="Submit" id="input-submit">
        </form>
    </div>
    {%else%}
    You don't have permission.
    {%endif%}
<!--
<script type="text/javascript">
    var widgets = JSON.parse('{{ widgets|escapejs }}');
</script> -->



{% endblock content %}