<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Chesapeake Community Connect</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <!-- Include Google Maps API with your API key -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDObg89VOn66Pt_0l03pHwKWBdGmPdTX9A&libraries=places"></script>
    <script src="https://accounts.google.com/gsi/client" async></script>
</head>
<body>
    <header>
        <nav>
            <ul> 
                <li><a class="nav-link" href="/map">Map</a></li>
                <li><a class="nav-link" href="/about">About</a></li>
                <li><a class="nav-link" href="/contact">Contact</a></li>
                <li><a class="nav-link" href="/signin">Sign In</a></li>
            </ul>
        </nav>
    </header>
        <div id="content" style="display: block;">
            <h1>Chesapeake Community Connect</h1>
            <div id="map" style="width: 100%; height: 400px;"></div>
            <button id="add-marker-button">Create a Post</button>
        </div>
        <div id="add-marker-form" style="display: none;">
            <h1>Create a Post</h1>
            <form id="marker-form">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" required>
                <br>
        
                <label for="description">Description:</label>
                <textarea id="description" name="description" rows="3" required></textarea>
                <br>
        
                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required>
                <br>
        
                <label for="city">City:</label>
                <input type="text" id="city" name="city" required>
                <br>
        
                <label for="state">State:</label>
                <input type="text" id="state" name="state" required>
                <br>
        
                <label for="zip">Zip:</label>
                <input type="text" id="zip" name="zip" required>
                <br>
        
                <button type="submit" id="post-button">Post</button>
            </form>
        </div>
        
    <div id="about-tab" style="display: none;">
        <h1>About Us</h1>
        <p>Learn more about our organization. Add content here.</p>
    </div>
<!-- Contact Us Page -->
<div id="contact-tab" style="display: none;">
    <h1>Contact Us</h1>
    <div id="show-contact-form-button" onclick="showContactForm()">Contact Us</div>
    <form id="contact-form" style="display: none;">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required>
        <br>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>
        <br>
        <label for="message">Message:</label>
        <textarea id="message" name="message" rows="5" required></textarea>
        <br>
        <button type="button" id="submit-contact-button" onclick="submitContactForm()">Submit</button>
    </form>
    <p id="form-submitted" style="display: none;">Form submitted successfully!</p>
</div>
</form>
<p id="form-submitted" style="display: none;">Form submitted successfully!</p>
</div>
    <p id="form-submitted" style="display: none;">Form submitted successfully!</p>
</div>

<script>
    function showContactForm() {
        const contactForm = document.getElementById("contact-form");
        contactForm.style.display = "block";
    }

    function submitContactForm() {
        const contactForm = document.getElementById("contact-form");
        const formSubmitted = document.getElementById("form-submitted");

        // Get the form data
        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const message = document.getElementById("message").value;

        // Create an object to represent the contact data
        const contactData = {
            name: name,
            email: email,
            message: message,
        };

        // Save the contact data to a JSON file (locally for now)
        // replace this with server-side logic to save to a JSON file
        // For local testing, you can use localStorage
        const contactList = JSON.parse(localStorage.getItem("contacts")) || [];
        contactList.push(contactData);
        localStorage.setItem("contacts", JSON.stringify(contactList));

        contactForm.style.display = "none";
        formSubmitted.style.display = "block";

        // Reset the form for the next user
        resetContactForm();
    }

    function resetContactForm() {
        document.getElementById("contact-form").reset();
    }
</script>
    <div id="signin-tab" style="display: none;">
        <h1>Sign In</h1>
        <div id="buttonDiv"></div>
        <script>
            function handleCredentialResponse(response) {
                console.log("Encoded JWT ID token: " + response.credential);
            }
            window.onload = function () {
                google.accounts.id.initialize({
                    client_id: "221198763427-g67flvpi5mfvqlhh0a2je4517io0ngkc.apps.googleusercontent.com",
                    callback: handleCredentialResponse
                });
                google.accounts.id.renderButton(
                    document.getElementById("buttonDiv"),
                    { theme: "outline", size: "large" }
                );
                google.accounts.id.prompt();
            }
        </script>
    </div>
    <footer>
        <div class="footer-content">
            <img src=assets/smcm-logo.png alt="SMCM Logo" id="smcm-logo">
            &copy; 2023 SMCM Capstone Website
            
        </div>
    </footer>
    <script src="script.js"></script>
    <script>
        let formSubmitted = false;
    
        function showContactForm() {
            const contactForm = document.getElementById("contact-form");
            const formSubmittedMessage = document.getElementById("form-submitted");
            const showContactButton = document.getElementById("show-contact-form-button");
    
            if (formSubmitted) {
                // If the form is already submitted, reset it
                resetContactForm();
            } else {
                // Show the contact form
                contactForm.style.display = "block";
                formSubmittedMessage.style.display = "none";
                showContactButton.style.display = "none";
            }
        }
    
        function submitContactForm() {
            const contactForm = document.getElementById("contact-form");
            const formSubmittedMessage = document.getElementById("form-submitted");
            const formButtons = document.getElementById("form-buttons");
            const showContactButton = document.getElementById("show-contact-form-button");
    
            // Check if the form is already submitted
            if (!formSubmitted) {
                // Get the form data
                const name = document.getElementById("name").value;
                const email = document.getElementById("email").value;
                const message = document.getElementById("message").value;
    
                // Create an object to represent the contact data
                const contactData = {
                    name: name,
                    email: email,
                    message: message,
                };
    
                // Save the contact data to a JSON file (locally for now)
                // Replace this with server-side logic to save to a JSON file or a database
                const contactList = JSON.parse(localStorage.getItem("contacts")) || [];
                contactList.push(contactData);
                localStorage.setItem("contacts", JSON.stringify(contactList));
    
                formSubmitted = true;
                contactForm.style.display = "none";
                formSubmittedMessage.style.display = "block";
                formButtons.style.display = "none";
                showContactButton.style.display = "block";
            }
        }
    
        function resetContactForm() {
            document.getElementById("contact-form").reset();
            formSubmitted = false;
            showContactForm();
        }
    </script>
    
</body>
</html> 